<html>
<head>
	<title>RTGE sample</title>
	<script src="../../rtge.js"></script>
	<script language="JavaScript" type="text/javascript">
		function Hero() {
			rtge.DynObject.call(this);
			this.animation = "hero.slash";
			this.x = 30;
			this.y = 100;
			this.anchorX = 17;
			this.anchorY = 96;
			this.destination = null;
			this.tick = function(time) {
				if (this.destination != null) {
				var stepSize = time / 3;
					if (this.x < this.destination.x) {
						this.x += stepSize;
						if (this.x > this.destination.x) this.x = this.destination.x;
					}
					if (this.x > this.destination.x) {
						this.x -= stepSize;
						if (this.x < this.destination.x) this.x = this.destination.x;
					}

					if (this.y < this.destination.y) {
						this.y += stepSize;
						if (this.y > this.destination.y) this.y = this.destination.y;
					}
					if (this.y > this.destination.y) {
						this.y -= stepSize;
						if (this.y < this.destination.y) this.y = this.destination.y;
					}

					if (this.x == this.destination.x && this.y == this.destination.y) {
						this.destination = null;
					}
				}
			}
			this.moveTo = function(x, y) {
				this.destination = {x: x, y: y};
			}
		}

		var hero = new Hero();
		function moveHero(x, y) {
			hero.moveTo(x, y);
		}

		function init() {
			var anim = new rtge.Animation();
			anim.steps = ["imgs/hero1.png", "imgs/hero2.png"];
			anim.durations = [250, 250];

			rtge.init(
				"view",
				{
					terrain: "imgs/terrain.jpg",
					objects: [
						hero
					]
				},
				{
					"hero.slash": anim
				},
				[
					"imgs/hero1.png",
					"imgs/hero2.png",
					"imgs/terrain.jpg"
				],
				{
					"worldClick": moveHero
				}
			);
		}
	</script>
</head>
<body onload="init();">
	<canvas id="view" style="width:500px; height:500px"></canvas>
</body>
</html>
